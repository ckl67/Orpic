<!DOCTYPE html>
<head>
   <title>Oric Games</title>
   <meta charset="utf-8">
   <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

   <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
   <script>
     
     var source = new EventSource("/progress");
     source.onmessage = function(event) {
	 $('.progress-bar').css('width', event.data+'%').attr('aria-valuenow', event.data);
	 $('.progress-bar-label').text(event.data+'%');
	 
	 if(event.data == 100){
	     source.close()
	 }
     }
   </script>
   
</head>

<body>
  <h1>Oric Game Web Server</h1>

  <div class="progress" style="width: 50%; margin: 50px;">
    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
      <span class="progress-bar-label">0%</span>
    </div>
  </div>

  <table style="width:100%">
    {% for tnb in tapes %}
    <tr>
      
      <td width="30%">
	{{ tapes[tnb].name }}
      </td>
      
      <td width="40%">
	<img src={{ tapes[tnb].directory_src }}{{ tapes[tnb].picture }}
	     width="200" 
	     alt={{ tapes[tnb].name }}
	     >
      </td>

      <td>
	{% for i in range(tapes[tnb].tape_nb) %}
	<a href="?tapeIdx={{tnb}}&audioIdx={{i+1}}">Transfert file to Oric</a>
	<!--
	    {{tapes[tnb].directory_src}}{{tapes[tnb].tape_prefix}}{{i+1}}.wav
	  -->
	
	<br>
	{% endfor %}
	
      </td>
      
    </tr>
    {% endfor %}
  </table>
  
</body>
</html>

